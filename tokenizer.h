#ifndef TOKEN_H
#define TOKEN_H
#include <memory>
#include <string>
#include <list>

bool isCharInSet(char, const std::string &);

namespace tkz {
    inline std::string bad_chars = " \n\t";
    inline std::string DIGITS = "0123456789";
    enum class TokenType {
        INT,
        FLOAT,
        DOUBLE,
        PLUS,
        MINUS,
        MUL,
        DIV,
        LPAREN,
        RPAREN,
        SEMICOLON
    };
    class Token {
        public: 
        TokenType type;
        std::string value;
        Token(TokenType t, std::string val);
        bool operator==(const Token&) const = default;
        std::string print() const;
    };
//////////////////////////////////////////////////////////////////////////////////////////////
// ERRORS ///////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////
    
    class Error {
        public:
        std::string error_name;
        std::string details;
        Error(std::string err, std::string details);
        std::string as_string();
        virtual ~Error() = default;
    };
    class IllegalCharError : public Error { 
    public:
        IllegalCharError(std::string details) : Error("Illegal Character", details) {}
    };
    class MissingSemicolonError : public Error {
    public:
        MissingSemicolonError() : Error("Expected Semicolon on line", " not emplemented") {}
    };
    struct Ler {
        std::list<Token> Tkns;
        std::unique_ptr<Error> error;
    };
//////////////////////////////////////////////////////////////////////////////////////////////
// RUN// ////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////
    Ler run(std::string text);
//////////////////////////////////////////////////////////////////////////////////////////////
// POSITION /////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////
    class Position {

    };
//////////////////////////////////////////////////////////////////////////////////////////////
// LEXER ////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////
    class Lexer {
        public:
        std::string text;
        int pos;
        char current_char;
        Lexer(std::string text);

        void advance();

        Ler make_tokens();

        Token make_number();
    };
}
#endif